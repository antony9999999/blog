[{"data":1,"prerenderedAt":610},["ShallowReactive",2],{"content-query-nydz0E8puB":3},[4,51,540],{"_path":5,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"title":9,"description":10,"date":11,"draft":7,"tags":12,"thumbnail":17,"slug":18,"body":19,"_type":45,"_id":46,"_source":47,"_file":48,"_stem":49,"_extension":50},"/posts/mongo-db-copy","posts",false,"","Integrating MongoDB and Mongoose with Nuxt 3","XYI SOSI","2023-10-06",[13,14,15,16],"nuxt","nuxt3","mongodb","mongoose","/img/mongodb.webp","mongo-db",{"type":20,"children":21,"toc":41},"root",[22,29,36],{"type":23,"tag":24,"props":25,"children":26},"element","p",{},[27],{"type":28,"value":10},"text",{"type":23,"tag":30,"props":31,"children":33},"h2",{"id":32},"pidoras",[34],{"type":28,"value":35},"Pidoras",{"type":23,"tag":24,"props":37,"children":38},{},[39],{"type":28,"value":40},"ssaasdasd",{"title":8,"searchDepth":42,"depth":42,"links":43},2,[44],{"id":32,"depth":42,"text":35},"markdown","content:posts:mongo-db-copy.md","content","posts/mongo-db-copy.md","posts/mongo-db-copy","md",{"_path":52,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"title":9,"description":10,"date":11,"draft":7,"tags":53,"thumbnail":17,"slug":18,"body":54,"_type":45,"_id":537,"_source":47,"_file":538,"_stem":539,"_extension":50},"/posts/mongo-db",[13,14,15,16],{"type":20,"children":55,"toc":524},[56,60,76,85,95,107,112,121,126,132,148,153,163,184,210,221,234,243,248,266,276,294,303,316,323,328,338,344,350,364,377,386,391,400,405,415,434,443,448,453,458,467,472,477,491,497,502],{"type":23,"tag":24,"props":57,"children":58},{},[59],{"type":28,"value":10},{"type":23,"tag":30,"props":61,"children":63},{"id":62},"prerequisites",[64],{"type":23,"tag":65,"props":66,"children":68},"span",{"style":67},"color: blue",[69],{"type":23,"tag":70,"props":71,"children":73},"code",{"className":72},[],[74],{"type":28,"value":75},"Prerequisites",{"type":23,"tag":24,"props":77,"children":78},{},[79],{"type":23,"tag":80,"props":81,"children":84},"img",{"alt":82,"src":83},"hello-world.jpg","/img/hello-world.jpg",[],{"type":23,"tag":24,"props":86,"children":87},{},[88],{"type":23,"tag":65,"props":89,"children":92},{"style":90,":class":91},"color: red","true",[93],{"type":28,"value":94},"Before we get started, make sure you have a working nuxt 3 project. If you don't have one already, you can create a new project using the following command:",{"type":23,"tag":96,"props":97,"children":102},"pre",{"className":98,"code":100,"language":101,"meta":8},[99],"language-bash","npx nuxi init \u003Cproject-name>\n","bash",[103],{"type":23,"tag":70,"props":104,"children":105},{"__ignoreMap":8},[106],{"type":28,"value":100},{"type":23,"tag":24,"props":108,"children":109},{},[110],{"type":28,"value":111},"Once the project is created, navigate to the project directory and install the dependencies:",{"type":23,"tag":96,"props":113,"children":116},{"className":114,"code":115,"language":101,"meta":8},[99],"cd \u003Cproject-name>\nnpm install // or yarn install\n",[117],{"type":23,"tag":70,"props":118,"children":119},{"__ignoreMap":8},[120],{"type":28,"value":115},{"type":23,"tag":24,"props":122,"children":123},{},[124],{"type":28,"value":125},"Now that we have a working nuxt 3 project, let's explore the two methods of adding MongoDB and Mongoose to our project.",{"type":23,"tag":30,"props":127,"children":129},{"id":128},"method-1-using-the-nuxt-server-utils-module",[130],{"type":28,"value":131},"Method 1: Using the nuxt-server-utils module",{"type":23,"tag":24,"props":133,"children":134},{},[135,137,146],{"type":28,"value":136},"This is the easiest way to add MongoDB and Mongoose to your Nuxt 3 project. The ",{"type":23,"tag":138,"props":139,"children":143},"a",{"href":140,"rel":141},"https://nuxt-server-utils.jahid.dev",[142],"nofollow",[144],{"type":28,"value":145},"nuxt-server-utils",{"type":28,"value":147}," module provides a set of utilities that allow you to interact with your MongoDB database from within your Nuxt 3 application. It also provides a simple API for creating and managing your MongoDB collections.",{"type":23,"tag":24,"props":149,"children":150},{},[151],{"type":28,"value":152},"To get started, install the nuxt-server-utils module using the following command:",{"type":23,"tag":96,"props":154,"children":158},{"className":155,"code":156,"filename":157,"language":101,"meta":8},[99],"npm install nuxt-server-utils mongoose\n","npm",[159],{"type":23,"tag":70,"props":160,"children":161},{"__ignoreMap":8},[162],{"type":28,"value":156},{"type":23,"tag":24,"props":164,"children":165},{},[166,168,174,176,182],{"type":28,"value":167},"Next, Add the nuxt-server-utils module to the ",{"type":23,"tag":70,"props":169,"children":171},{"className":170},[],[172],{"type":28,"value":173},"modules",{"type":28,"value":175}," section of your ",{"type":23,"tag":70,"props":177,"children":179},{"className":178},[],[180],{"type":28,"value":181},"nuxt.config.ts",{"type":28,"value":183}," file:",{"type":23,"tag":24,"props":185,"children":186},{},[187,189,194,196,201,203,208],{"type":28,"value":188},"Add ",{"type":23,"tag":70,"props":190,"children":192},{"className":191},[],[193],{"type":28,"value":145},{"type":28,"value":195}," to the ",{"type":23,"tag":70,"props":197,"children":199},{"className":198},[],[200],{"type":28,"value":173},{"type":28,"value":202}," section of ",{"type":23,"tag":70,"props":204,"children":206},{"className":205},[],[207],{"type":28,"value":181},{"type":28,"value":209},":",{"type":23,"tag":96,"props":211,"children":216},{"className":212,"code":214,"filename":181,"language":215,"meta":8},[213],"language-ts","export default defineNuxtConfig({\n  // ...\n  modules: [\"nuxt-server-utils\"],\n});\n","ts",[217],{"type":23,"tag":70,"props":218,"children":219},{"__ignoreMap":8},[220],{"type":28,"value":214},{"type":23,"tag":24,"props":222,"children":223},{},[224,226,232],{"type":28,"value":225},"Finally, add the MongoDB connection string to the ",{"type":23,"tag":70,"props":227,"children":229},{"className":228},[],[230],{"type":28,"value":231},".env",{"type":28,"value":233}," file of your nuxt app:",{"type":23,"tag":96,"props":235,"children":238},{"className":236,"code":237,"filename":231,"language":101,"meta":8},[99],"MONGODB_URI=\u003Cyour-mongodb-connection-string>\n",[239],{"type":23,"tag":70,"props":240,"children":241},{"__ignoreMap":8},[242],{"type":28,"value":237},{"type":23,"tag":24,"props":244,"children":245},{},[246],{"type":28,"value":247},"That's it! Now you can use mongoose in your Nuxt 3 server routes like how it is normally used in Express. For example, let's create a simple server route that returns all the documents from a MongoDB collection:",{"type":23,"tag":24,"props":249,"children":250},{},[251,257,259,265],{"type":23,"tag":252,"props":253,"children":254},"strong",{},[255],{"type":28,"value":256},"Defining the Mongoose model",{"type":28,"value":258}," in ",{"type":23,"tag":70,"props":260,"children":262},{"className":261},[],[263],{"type":28,"value":264},"server/models/user.model.ts",{"type":28,"value":209},{"type":23,"tag":96,"props":267,"children":271},{"className":268,"code":269,"filename":270,"language":215,"meta":8},[213],"import { Schema, model } from \"mongoose\";\n\nconst UserSchema = new Schema({\n  name: String,\n  email: String,\n});\n\nexport const User = model(\"User\", UserSchema);\n","server/models/User.ts",[272],{"type":23,"tag":70,"props":273,"children":274},{"__ignoreMap":8},[275],{"type":28,"value":269},{"type":23,"tag":24,"props":277,"children":278},{},[279,281,286,287,293],{"type":28,"value":280},"Now let's create the ",{"type":23,"tag":252,"props":282,"children":283},{},[284],{"type":28,"value":285},"API Route",{"type":28,"value":258},{"type":23,"tag":70,"props":288,"children":290},{"className":289},[],[291],{"type":28,"value":292},"server/api/users.get.ts",{"type":28,"value":209},{"type":23,"tag":96,"props":295,"children":298},{"className":296,"code":297,"filename":292,"language":215,"meta":8},[213],"import { User } from \"~~/server/models/user.model\";\n\nexport default defineEventHandler(async (event) => {\n  const users = await User.find();\n\n  return Users;\n});\n",[299],{"type":23,"tag":70,"props":300,"children":301},{"__ignoreMap":8},[302],{"type":28,"value":297},{"type":23,"tag":24,"props":304,"children":305},{},[306,308,314],{"type":28,"value":307},"If you navigate to the ",{"type":23,"tag":70,"props":309,"children":311},{"className":310},[],[312],{"type":28,"value":313},"/api/users",{"type":28,"value":315}," route, you should see a list of all the users in your database.",{"type":23,"tag":317,"props":318,"children":320},"h3",{"id":319},"video-tutorial",[321],{"type":28,"value":322},"Video Tutorial",{"type":23,"tag":24,"props":324,"children":325},{},[326],{"type":28,"value":327},"If you enjoy learning through video tutorials, I have created a video where i walk you through the above steps:",{"type":23,"tag":24,"props":329,"children":330},{},[331],{"type":23,"tag":138,"props":332,"children":335},{"href":333,"rel":334},"https://www.youtube.com/embed/h10sAu3ETr8",[142],[336],{"type":28,"value":337},"YouTube video player",{"type":23,"tag":317,"props":339,"children":341},{"id":340},"example-project",[342],{"type":28,"value":343},"Example Project",{"type":23,"tag":30,"props":345,"children":347},{"id":346},"method-2-creating-a-nitro-plugin",[348],{"type":28,"value":349},"Method 2: Creating a Nitro plugin",{"type":23,"tag":24,"props":351,"children":352},{},[353,355,362],{"type":28,"value":354},"Nuxt 3 uses ",{"type":23,"tag":138,"props":356,"children":359},{"href":357,"rel":358},"https://nitro.unjs.io/",[142],[360],{"type":28,"value":361},"Nitro",{"type":28,"value":363}," under the hood to power its server-side rendering capabilities. Nitro provides a simple API for creating plugins that can be used to extend the functionality of your Nuxt 3 application. In this section, we'll create a Nitro plugin that will allow us to use MongoDB and Mongoose in our Nuxt 3 project.",{"type":23,"tag":24,"props":365,"children":366},{},[367,369,375],{"type":28,"value":368},"First, let's create a new plugin file in the ",{"type":23,"tag":70,"props":370,"children":372},{"className":371},[],[373],{"type":28,"value":374},"server/plugins",{"type":28,"value":376}," directory:",{"type":23,"tag":96,"props":378,"children":381},{"className":379,"code":380,"language":101,"meta":8},[99],"touch server/plugins/mongodb.ts\n",[382],{"type":23,"tag":70,"props":383,"children":384},{"__ignoreMap":8},[385],{"type":28,"value":380},{"type":23,"tag":24,"props":387,"children":388},{},[389],{"type":28,"value":390},"Then let's install the required dependencies:",{"type":23,"tag":96,"props":392,"children":395},{"className":393,"code":394,"language":101,"meta":8},[99],"npm install mongoose\n",[396],{"type":23,"tag":70,"props":397,"children":398},{"__ignoreMap":8},[399],{"type":28,"value":394},{"type":23,"tag":24,"props":401,"children":402},{},[403],{"type":28,"value":404},"Next, let's add the following code to the newly created plugin file:",{"type":23,"tag":96,"props":406,"children":410},{"className":407,"code":408,"filename":409,"language":215,"meta":8},[213],"import { Nitro } from \"nitropack\";\nimport mongoose from \"mongoose\";\n\nexport default async (_nitroApp: Nitro) => {\n  const config = useRuntimeConfig();\n\n  try {\n    await mongoose.connect(config.mongodbUri);\n    console.log(\"Connected to MongoDB\");\n  } catch (e) {\n    console.error(e);\n  }\n};\n","server/plugins/mongodb.ts",[411],{"type":23,"tag":70,"props":412,"children":413},{"__ignoreMap":8},[414],{"type":28,"value":408},{"type":23,"tag":24,"props":416,"children":417},{},[418,420,426,428,433],{"type":28,"value":419},"Finally, let's add the plugin to the ",{"type":23,"tag":70,"props":421,"children":423},{"className":422},[],[424],{"type":28,"value":425},"plugins",{"type":28,"value":427}," section of our ",{"type":23,"tag":70,"props":429,"children":431},{"className":430},[],[432],{"type":28,"value":181},{"type":28,"value":183},{"type":23,"tag":96,"props":435,"children":438},{"className":436,"code":437,"filename":181,"language":215,"meta":8},[213],"export default defineNuxtConfig({\n  // ...\n  nitro: {\n    plugins: [\"~/server/plugins/mongodb.ts\"],\n  },\n});\n",[439],{"type":23,"tag":70,"props":440,"children":441},{"__ignoreMap":8},[442],{"type":28,"value":437},{"type":23,"tag":24,"props":444,"children":445},{},[446],{"type":28,"value":447},"That's it! Now you can use mongoose in your Nuxt 3 server routes like how it is normally used in Express.",{"type":23,"tag":317,"props":449,"children":451},{"id":450},"video-tutorial-1",[452],{"type":28,"value":322},{"type":23,"tag":24,"props":454,"children":455},{},[456],{"type":28,"value":457},"If you prefer video tutorials, you can watch the following video where I walk you through the process of adding MongoDB and Mongoose to a Nuxt 3 project:",{"type":23,"tag":24,"props":459,"children":460},{},[461],{"type":23,"tag":138,"props":462,"children":465},{"href":463,"rel":464},"https://www.youtube.com/embed/EidO0c9L6b0",[142],[466],{"type":28,"value":337},{"type":23,"tag":317,"props":468,"children":470},{"id":469},"example-project-1",[471],{"type":28,"value":343},{"type":23,"tag":24,"props":473,"children":474},{},[475],{"type":28,"value":476},"Play around with the example project to get a better understanding of how to use MongoDB and Mongoose with Nuxt 3.",{"type":23,"tag":24,"props":478,"children":479},{},[480,482,489],{"type":28,"value":481},"You ca find the full source code of this example ",{"type":23,"tag":138,"props":483,"children":486},{"href":484,"rel":485},"https://github.com/jahidanowar/nuxt3-mongoose",[142],[487],{"type":28,"value":488},"here",{"type":28,"value":490},".",{"type":23,"tag":30,"props":492,"children":494},{"id":493},"conclusion",[495],{"type":28,"value":496},"Conclusion",{"type":23,"tag":24,"props":498,"children":499},{},[500],{"type":28,"value":501},"In this blog post, we explored two simple yet effective methods to add MongoDB and Mongoose to your Nuxt 3 project. Whether you're a seasoned developer or just starting your journey in full-stack web development, this guide will help you leverage the capabilities of MongoDB and Mongoose within the Nuxt ecosystem.",{"type":23,"tag":24,"props":503,"children":504},{},[505,507,514,516,523],{"type":28,"value":506},"If you have any questions or feedback, feel free to reach out to me on ",{"type":23,"tag":138,"props":508,"children":511},{"href":509,"rel":510},"https://jahid.dev/d",[142],[512],{"type":28,"value":513},"Discord",{"type":28,"value":515}," or ",{"type":23,"tag":138,"props":517,"children":520},{"href":518,"rel":519},"https://twitter.com/jahidDev",[142],[521],{"type":28,"value":522},"Twitter",{"type":28,"value":490},{"title":8,"searchDepth":42,"depth":42,"links":525},[526,527,532,536],{"id":62,"depth":42,"text":75},{"id":128,"depth":42,"text":131,"children":528},[529,531],{"id":319,"depth":530,"text":322},3,{"id":340,"depth":530,"text":343},{"id":346,"depth":42,"text":349,"children":533},[534,535],{"id":450,"depth":530,"text":322},{"id":469,"depth":530,"text":343},{"id":493,"depth":42,"text":496},"content:posts:mongo-db.md","posts/mongo-db.md","posts/mongo-db",{"_path":541,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"title":542,"description":543,"date":544,"draft":7,"tags":545,"thumbnail":548,"slug":549,"body":550,"_type":45,"_id":607,"_source":47,"_file":608,"_stem":609,"_extension":50},"/posts/hello-world","Hello World","Hello World!","2023-10-05T00:00:00.000Z",[546,547],"hello","world","/img/viso.jpg","hello-world",{"type":20,"children":551,"toc":605},[552,556,567,571,580,590,595,600],{"type":23,"tag":24,"props":553,"children":554},{},[555],{"type":28,"value":543},{"type":23,"tag":96,"props":557,"children":562},{"className":558,"code":560,"language":561,"meta":8},[559],"language-js","console.log(\"Hello World!\");\n","js",[563],{"type":23,"tag":70,"props":564,"children":565},{"__ignoreMap":8},[566],{"type":28,"value":560},{"type":23,"tag":568,"props":569,"children":570},"hr",{},[],{"type":23,"tag":572,"props":573,"children":574},"btn",{},[575],{"type":23,"tag":24,"props":576,"children":577},{},[578],{"type":28,"value":579},"The content of the card",{"type":23,"tag":581,"props":582,"children":584},"h1",{"id":583},"lorem-ipsum-dolor-sit-amet-consectetur-adipiscing-elit-vestibulum-feugiat-venenatis-libero-suspendisse-ullamcorper-lacus-ut-urna-euismod-ac-ullamcorper-leo-dapibus-integer-sapien-felis-porttitor-eu-erat-vel-tempus-faucibus-dolor-nulla-convallis-elementum-dolor-non-vestibulum-est-pretium-at-morbi-eu-tortor-in-odio-tincidunt-rutrum-nunc-hendrerit-libero-commodo-tortor-facilisis-nec-blandit-nulla-consectetur-class-aptent-taciti-sociosqu-ad-litora-torquent-per-conubia-nostra-per-inceptos-himenaeos-nunc-viverra-tortor-blandit-ullamcorper-nunc-nec-finibus-massa-nunc-sit-amet-sapien-vitae-tellus-rutrum-pellentesque-morbi-ornare-nec-sem-in-elementum-vestibulum-maximus-neque-sed-nisi-malesuada-laoreet-integer-nec-augue-ut-mi-mattis-dapibus-vitae-non-mi-nullam-sit-amet-sagittis-urna-sit-amet-rhoncus-leo",[585],{"type":23,"tag":252,"props":586,"children":587},{},[588],{"type":28,"value":589},"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum feugiat venenatis libero. Suspendisse ullamcorper lacus ut urna euismod, ac ullamcorper leo dapibus. Integer sapien felis, porttitor eu erat vel, tempus faucibus dolor. Nulla convallis elementum dolor, non vestibulum est pretium at. Morbi eu tortor in odio tincidunt rutrum. Nunc hendrerit libero commodo tortor facilisis, nec blandit nulla consectetur. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nunc viverra tortor blandit, ullamcorper nunc nec, finibus massa. Nunc sit amet sapien vitae tellus rutrum pellentesque. Morbi ornare nec sem in elementum. Vestibulum maximus neque sed nisi malesuada laoreet. Integer nec augue ut mi mattis dapibus vitae non mi. Nullam sit amet sagittis urna, sit amet rhoncus leo.",{"type":23,"tag":24,"props":591,"children":592},{},[593],{"type":28,"value":594},"Nulla facilisi. Duis tincidunt erat eros, ac molestie mi malesuada nec. Curabitur tincidunt ullamcorper purus eu condimentum. Aenean hendrerit, massa egestas vehicula semper, metus nisi vehicula massa, non volutpat ex dui et est. Donec suscipit tellus sed sem scelerisque accumsan. Sed ac consequat nibh. Proin condimentum pulvinar neque. Ut tincidunt sem non nulla rhoncus, a laoreet urna scelerisque. Proin nec venenatis sapien. Suspendisse quam felis, tincidunt in ex vel, aliquam luctus nibh. Nulla at sapien venenatis, tempor dolor in, elementum nulla. Cras at nunc mi. Vivamus sagittis, enim a aliquet condimentum, orci nunc suscipit nisi, a sollicitudin massa velit sit amet elit. Suspendisse potenti. Nulla placerat tortor sit amet odio ultricies, quis blandit nisl gravida.",{"type":23,"tag":24,"props":596,"children":597},{},[598],{"type":28,"value":599},"Aliquam erat volutpat. Interdum et malesuada fames ac ante ipsum primis in faucibus. Nulla bibendum sem ac sem vulputate sollicitudin. Nunc eget molestie massa, eu vulputate lorem. Quisque quis urna vel massa lacinia consectetur. Duis sagittis massa id tellus hendrerit euismod. Nunc euismod sapien eget pulvinar egestas. Ut scelerisque eleifend diam, quis ultrices tellus ultrices id. Phasellus eget tellus varius, tincidunt elit id, placerat ipsum. Nullam a vulputate sapien. Nunc consectetur lacinia lobortis. Sed in ultrices diam. Proin est velit, posuere ut pellentesque sit amet, facilisis nec quam.",{"type":23,"tag":24,"props":601,"children":602},{},[603],{"type":28,"value":604},"Nullam nec sem ut mi ullamcorper sollicitudin. Nulla nec diam elit. Nullam vitae maximus massa, bibendum malesuada nunc. Nam quis tincidunt ante, et rhoncus nisi. Phasellus dictum dictum feugiat. Integer placerat at erat at aliquam. Donec et nibh vitae nisl molestie hendrerit. In tincidunt et turpis sit amet maximus. Cras vel viverra leo. Mauris non euismod metus. Maecenas ullamcorper in justo id condimentum. Vestibulum ultricies pellentesque lorem. Sed malesuada iaculis pharetra.",{"title":8,"searchDepth":42,"depth":42,"links":606},[],"content:posts:hello-world.md","posts/hello-world.md","posts/hello-world",1741610711296]