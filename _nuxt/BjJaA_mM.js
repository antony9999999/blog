import{n as ne,s as W,f as E,g as I,r as le,h as ye,i as Ce,j as ce,k as de,l as pe,m as _e,p as H,q as we,v as ve,x as ke,y as $e,z as L,A as z,B as Be,_ as fe,C as me,c as S,o as C,a as f,D,F as Q,E as Y,G as c,H as j,I as Z,J as G,K as Le,L as ge,M as Ie,N as re,O as Se,P as ae,Q as he,R as Ee,S as Me,T as Te,b as O,w as F,U as Pe,e as Re,t as J,V as Ae,d as De}from"./BcwwQqIg.js";import Oe from"./2wnPUsmy.js";import We from"./BgmUIsnS.js";import{_ as Ne,a as Ve}from"./BTNquY73.js";import{u as Ue,q as je}from"./B8VwBblp.js";import"./DdUfuLra.js";import"./C-v3KzvZ.js";import"./CxYJgpPD.js";import"./BUjKfpFL.js";import"./CtGAFHGA.js";const X=_e?window:void 0;function P(e){var n;const p=I(e);return(n=p==null?void 0:p.$el)!=null?n:p}function ie(...e){const n=[],p=()=>{n.forEach(t=>t()),n.length=0},h=(t,i,a,s)=>(t.addEventListener(i,a,s),()=>t.removeEventListener(i,a,s)),d=E(()=>{const t=H(I(e[0])).filter(i=>i!=null);return t.every(i=>typeof i!="string")?t:void 0}),l=we(()=>{var t,i;return[(i=(t=d.value)==null?void 0:t.map(a=>P(a)))!=null?i:[X].filter(a=>a!=null),H(I(d.value?e[1]:e[0])),H(L(d.value?e[2]:e[1])),I(d.value?e[3]:e[2])]},([t,i,a,s])=>{if(p(),!(t!=null&&t.length)||!(i!=null&&i.length)||!(a!=null&&a.length))return;const o=$e(s)?{...s}:s;n.push(...t.flatMap(v=>i.flatMap(m=>a.map(g=>h(v,m,g,o)))))},{flush:"post"}),r=()=>{l(),p()};return pe(p),r}function Fe(){const e=W(!1),n=ke();return n&&ve(()=>{e.value=!0},n),e}function He(e){const n=Fe();return E(()=>(n.value,!!e()))}function be(e,n,p={}){const{window:h=X,...d}=p;let l;const r=He(()=>h&&"ResizeObserver"in h),t=()=>{l&&(l.disconnect(),l=void 0)},i=E(()=>{const o=I(e);return Array.isArray(o)?o.map(v=>P(v)):[P(o)]}),a=de(i,o=>{if(t(),r.value&&h){l=new ResizeObserver(n);for(const v of o)v&&l.observe(v,d)}},{immediate:!0,flush:"post"}),s=()=>{t(),a()};return pe(s),{isSupported:r,stop:s}}function ze(e,n={width:0,height:0},p={}){const{window:h=X,box:d="content-box"}=p,l=E(()=>{var o,v;return(v=(o=P(e))==null?void 0:o.namespaceURI)==null?void 0:v.includes("svg")}),r=W(n.width),t=W(n.height),{stop:i}=be(e,([o])=>{const v=d==="border-box"?o.borderBoxSize:d==="content-box"?o.contentBoxSize:o.devicePixelContentBoxSize;if(h&&l.value){const m=P(e);if(m){const g=m.getBoundingClientRect();r.value=g.width,t.value=g.height}}else if(v){const m=H(v);r.value=m.reduce((g,{inlineSize:k})=>g+k,0),t.value=m.reduce((g,{blockSize:k})=>g+k,0)}else r.value=o.contentRect.width,t.value=o.contentRect.height},p);ce(()=>{const o=P(e);o&&(r.value="offsetWidth"in o?o.offsetWidth:n.width,t.value="offsetHeight"in o?o.offsetHeight:n.height)});const a=de(()=>P(e),o=>{r.value=o?n.width:0,t.value=o?n.height:0});function s(){i(),a()}return{width:r,height:t,stop:s}}const ue=1;function Xe(e,n={}){const{throttle:p=0,idle:h=200,onStop:d=ne,onScroll:l=ne,offset:r={left:0,right:0,top:0,bottom:0},eventListenerOptions:t={capture:!1,passive:!0},behavior:i="auto",window:a=X,onError:s=u=>{console.error(u)}}=n,o=W(0),v=W(0),m=E({get(){return o.value},set(u){k(u,void 0)}}),g=E({get(){return v.value},set(u){k(void 0,u)}});function k(u,R){var w,N,V,U;if(!a)return;const B=I(e);if(!B)return;(V=B instanceof Document?a.document.body:B)==null||V.scrollTo({top:(w=I(R))!=null?w:g.value,left:(N=I(u))!=null?N:m.value,behavior:I(i)});const T=((U=B==null?void 0:B.document)==null?void 0:U.documentElement)||(B==null?void 0:B.documentElement)||B;m!=null&&(o.value=T.scrollLeft),g!=null&&(v.value=T.scrollTop)}const _=W(!1),b=le({left:!0,right:!1,top:!0,bottom:!1}),y=le({left:!1,right:!1,top:!1,bottom:!1}),M=u=>{_.value&&(_.value=!1,y.left=!1,y.right=!1,y.top=!1,y.bottom=!1,d(u))},$=ye(M,p+h),q=u=>{var R;if(!a)return;const w=((R=u==null?void 0:u.document)==null?void 0:R.documentElement)||(u==null?void 0:u.documentElement)||P(u),{display:N,flexDirection:V,direction:U}=getComputedStyle(w),B=U==="rtl"?-1:1,T=w.scrollLeft;y.left=T<o.value,y.right=T>o.value;const ee=Math.abs(T*B)<=(r.left||0),te=Math.abs(T*B)+w.clientWidth>=w.scrollWidth-(r.right||0)-ue;N==="flex"&&V==="row-reverse"?(b.left=te,b.right=ee):(b.left=ee,b.right=te),o.value=T;let A=w.scrollTop;u===a.document&&!A&&(A=a.document.body.scrollTop),y.top=A<v.value,y.bottom=A>v.value;const oe=Math.abs(A)<=(r.top||0),se=Math.abs(A)+w.clientHeight>=w.scrollHeight-(r.bottom||0)-ue;N==="flex"&&V==="column-reverse"?(b.top=se,b.bottom=oe):(b.top=oe,b.bottom=se),v.value=A},x=u=>{var R;if(!a)return;const w=(R=u.target.documentElement)!=null?R:u.target;q(w),_.value=!0,$(u),l(u)};return ie(e,"scroll",p?Ce(x,p,!0,!1):x,t),ce(()=>{try{const u=I(e);if(!u)return;q(u)}catch(u){s(u)}}),ie(e,"scrollend",M,t),{x:m,y:g,isScrolling:_,arrivedState:b,directions:y,measure(){const u=I(e);a&&u&&q(u)}}}const qe={wrapper:"relative",container:"relative w-full flex overflow-x-auto snap-x snap-mandatory scroll-smooth",item:"flex flex-none snap-center",arrows:{wrapper:"flex items-center justify-between"},indicators:{wrapper:"absolute flex items-center justify-center gap-3 bottom-4 inset-x-0",base:"rounded-full h-3 w-3",active:"bg-primary-500 dark:bg-primary-400",inactive:"bg-gray-100 dark:bg-gray-800"},default:{prevButton:{color:"black",class:"rtl:[&_span:first-child]:rotate-180 absolute start-4 top-1/2 transform -translate-y-1/2 rounded-full",icon:"i-heroicons-chevron-left-20-solid"},nextButton:{color:"black",class:"rtl:[&_span:last-child]:rotate-180 absolute end-4 top-1/2 transform -translate-y-1/2 rounded-full",icon:"i-heroicons-chevron-right-20-solid"}}},Ge=e=>{const n=z(0);function p(l){e.value.style.scrollSnapType="none",e.value.style.scrollBehavior="auto",n.value=l.pageX,window.addEventListener("mousemove",d),window.addEventListener("mouseup",h)}function h(){e.value.style.removeProperty("scroll-behavior"),e.value.style.removeProperty("scroll-snap-type"),e.value.style.removeProperty("pointer-events"),window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",h)}function d(l){l.preventDefault(),e.value.style.pointerEvents="none";const r=l.pageX-n.value;n.value=l.pageX,e.value.scrollBy(-r,0)}ve(()=>{e.value&&e.value.addEventListener("mousedown",p)}),Be(()=>{e.value&&e.value.removeEventListener("mousedown",p)})},K=Le(ae.ui.strategy,ae.ui.carousel,qe),Je=me({components:{UButton:ge},inheritAttrs:!1,props:{items:{type:Array,default:()=>[]},arrows:{type:Boolean,default:!1},indicators:{type:Boolean,default:!1},dir:{type:String,default:"ltr"},prevButton:{type:Object,default:()=>K.default.prevButton},nextButton:{type:Object,default:()=>K.default.nextButton},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:void 0}},setup(e,{expose:n}){const{ui:p,attrs:h}=Ie("carousel",re(e,"ui"),K,re(e,"class")),d=z(),l=z(0),{x:r}=Xe(d,{behavior:"smooth"}),{width:t}=ze(d);Ge(d),be(d,_=>{var y,M;const[b]=_;l.value=((M=(y=b==null?void 0:b.target)==null?void 0:y.firstElementChild)==null?void 0:M.clientWidth)||0});const i=E(()=>e.dir==="rtl"),a=E(()=>l.value?i.value?Math.round(-r.value/l.value)+1:Math.round(r.value/l.value)+1:0),s=E(()=>{if(!l.value)return 0;const _=Math.round(t.value/l.value);return e.items.length<=_?0:e.items.length-_+1}),o=E(()=>a.value<=1),v=E(()=>a.value===s.value);function m(){r.value+=i.value?-l.value:l.value}function g(){r.value-=i.value?-l.value:l.value}function k(_){r.value=(_-1)*l.value*(i.value?-1:1)}return n({pages:s,page:a,prev:g,next:m,select:k}),{ui:p,attrs:h,isFirst:o,isLast:v,carouselRef:d,pages:s,currentPage:a,onClickNext:m,onClickPrev:g,onClick:k,twMerge:Se}}}),Ke=["dir"],Qe=["role"],Ye=["aria-selected","aria-label","onClick"];function Ze(e,n,p,h,d,l){const r=ge;return C(),S("div",G({class:e.ui.wrapper},e.attrs,{dir:e.dir}),[f("div",{ref:"carouselRef",class:c([e.ui.container,"no-scrollbar"])},[(C(!0),S(Q,null,Y(e.items,(t,i)=>(C(),S("div",{key:i,class:c(e.ui.item),role:e.indicators?"tabpanel":null},[j(e.$slots,"default",{item:t,index:i},void 0,!0)],10,Qe))),128))],2),e.arrows?(C(),S("div",{key:0,class:c(e.ui.arrows.wrapper)},[j(e.$slots,"prev",{onClick:e.onClickPrev,disabled:e.isFirst},()=>{var t;return[e.prevButton?(C(),Z(r,G({key:0,disabled:e.isFirst},{...e.ui.default.prevButton,...e.prevButton},{class:e.twMerge(e.ui.default.prevButton.class,(t=e.prevButton)==null?void 0:t.class),"aria-label":"Prev",onClick:e.onClickPrev}),null,16,["disabled","class","onClick"])):D("",!0)]},!0),j(e.$slots,"next",{onClick:e.onClickNext,disabled:e.isLast},()=>{var t;return[e.nextButton?(C(),Z(r,G({key:0,disabled:e.isLast},{...e.ui.default.nextButton,...e.nextButton},{class:e.twMerge(e.ui.default.nextButton.class,(t=e.nextButton)==null?void 0:t.class),"aria-label":"Next",onClick:e.onClickNext}),null,16,["disabled","class","onClick"])):D("",!0)]},!0)],2)):D("",!0),e.indicators?(C(),S("div",{key:1,role:"tablist",class:c(e.ui.indicators.wrapper)},[(C(!0),S(Q,null,Y(e.pages,t=>j(e.$slots,"indicator",{key:t,onClick:e.onClick,active:t===e.currentPage,page:t},()=>[f("button",{type:"button",role:"tab","aria-selected":t===e.currentPage,class:c([e.ui.indicators.base,t===e.currentPage?e.ui.indicators.active:e.ui.indicators.inactive]),"aria-label":`set slide ${t}`,onClick:i=>e.onClick(t)},null,10,Ye)],!0)),128))],2)):D("",!0)],16,Ke)}const xe=fe(Je,[["render",Ze],["__scopeId","data-v-928015f4"]]),et=he("/static-media-frontend/pliant/logo-sign-comics.svg"),tt=he("/static-media-frontend/pliant/logo-sign-collections.svg"),ot=["src","alt"],st=["src","alt"],nt=me({__name:"[slug]",async setup(e){let n,p;const h=Ee(),{region:d,slug:l}=h.params,r=z(0),{data:t}=([n,p]=Me(()=>Ue(()=>je("posts").where({_dir:d,slug:l}).findOne(),"$V5C92ESsCJ")),n=await n,p(),n);if(!t.value)throw Te({statusCode:404,statusMessage:"Статья не найдена"});function i(s){r.value=s}function a(s){return s.filter(o=>o.slug!==l).filter((o,v,m)=>m.findIndex(g=>g.slug===o.slug)===v)}return(s,o)=>{var b,y;const v=Pe,m=Re,g=Oe,k=xe,_=We;return C(),S("article",{class:c(s.$style.postArticle)},[O(m,{to:`/${L(d)}`,class:c(s.$style.backButton),"aria-label":"Go back"},{default:F(()=>[O(v,{class:c(s.$style.arrowBack),name:"i-solar-arrow-left-linear"},null,8,["class"])]),_:1},8,["to","class"]),f("div",{class:c(s.$style.floatingButtons)},[f("a",{href:"#",class:c(s.$style.buttonPurple)},o[1]||(o[1]=[f("img",{src:et,alt:"comics"},null,-1)]),2),f("a",{href:"#",class:c(s.$style.buttonPurple)},o[2]||(o[2]=[f("img",{src:tt,alt:"collections"},null,-1)]),2)],2),f("h1",{class:c(s.$style.postTitle)},J((b=L(t))==null?void 0:b.title),3),(y=L(t))!=null&&y.thumbnail?(C(),S("div",{key:0,class:c(s.$style.postImageWrapper)},[f("img",{src:L(t).thumbnail,alt:L(t).title,class:c(s.$style.postImage)},null,10,ot)],2)):D("",!0),L(t)?(C(),S("div",{key:1,class:c(s.$style.postContent)},[O(g,{value:L(t)},null,8,["value"])],2)):D("",!0),f("div",{class:c(s.$style.bottomLogos)},[f("a",{href:"#",class:c(s.$style.bottomLogoLink)},o[3]||(o[3]=[f("img",{src:Ne,alt:"Only Nice Comics"},null,-1)]),2),f("a",{href:"#",class:c(s.$style.bottomLogoLink)},o[4]||(o[4]=[f("img",{src:Ve,alt:"Only Nice Collections"},null,-1)]),2)],2),f("div",{class:c(s.$style.divider)},null,2),O(_,{path:`/posts/${L(d)}`,fields:"title,date,thumbnail,slug,tags,description",query:{draft:!1,sort:[{date:-1}]}},{default:F(({list:M})=>[f("div",{class:c(s.$style.sliderSection)},[O(k,{modelValue:L(r),"onUpdate:modelValue":[o[0]||(o[0]=$=>Ae(r)?r.value=$:null),i],items:a(M),arrows:a(M).length>4,ui:{item:"flex-none px-2",container:"rounded-lg flex flex-row"}},{default:F(()=>[(C(!0),S(Q,null,Y(a(M),$=>(C(),Z(m,{key:$._path,to:`/${L(d)}/${$.slug}`,class:c(s.$style.postCard)},{default:F(()=>[f("div",{class:c(s.$style.postCardImageContainer)},[$.thumbnail?(C(),S("img",{key:0,src:$.thumbnail,alt:$.title,class:c(s.$style.postCardImage)},null,10,st)):D("",!0)],2),f("div",{class:c(s.$style.postCardContent)},[f("h3",{class:c(s.$style.postCardTitle)},J($.title),3),f("p",{class:c(s.$style.postCardDescription)},J($.description),3),f("div",{class:c(s.$style.createCardLink)},[o[5]||(o[5]=De(" try blog ")),O(v,{class:c(s.$style.arrowIcon),name:"i-solar-arrow-right-up-linear"},null,8,["class"])],2)],2)]),_:2},1032,["to","class"]))),128))]),_:2},1032,["modelValue","items","arrows"])],2)]),_:1},8,["path"])],2)}}}),lt="_postArticle_18egu_1",rt="_backButton_18egu_8",at="_arrowBack_18egu_28",it="_floatingButtons_18egu_39",ut="_buttonPurple_18egu_56",ct="_postTitle_18egu_75",dt="_postImageWrapper_18egu_92",pt="_postImage_18egu_92",vt="_postContent_18egu_105",ft="_bottomLogos_18egu_117",mt="_bottomLogoLink_18egu_136",gt="_sliderSection_18egu_160",ht="_sliderTitle_18egu_165",bt="_postCard_18egu_171",yt="_postCardImageContainer_18egu_183",Ct="_postCardImage_18egu_183",_t="_postCardContent_18egu_203",wt="_postCardTitle_18egu_212",kt="_postCardDescription_18egu_222",$t="_divider_18egu_243",Bt="_createCardLink_18egu_256",Lt="_arrowIcon_18egu_269",It={postArticle:lt,backButton:rt,arrowBack:at,floatingButtons:it,buttonPurple:ut,postTitle:ct,postImageWrapper:dt,postImage:pt,postContent:vt,bottomLogos:ft,bottomLogoLink:mt,sliderSection:gt,sliderTitle:ht,postCard:bt,postCardImageContainer:yt,postCardImage:Ct,postCardContent:_t,postCardTitle:wt,postCardDescription:kt,divider:$t,createCardLink:Bt,arrowIcon:Lt},St={$style:It},Vt=fe(nt,[["__cssModules",St]]);export{Vt as default};
